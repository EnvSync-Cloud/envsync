# =============================================================================
# EnvSync Monorepo – single source of truth for environment variables
# Copy to .env and fill in values. All packages (api, web, landing) and
# docker-compose read from this file when run from the repo root.
# =============================================================================

# --- App (API) ---
NODE_ENV=development
PORT=4000
DB_LOGGING=false
DB_AUTO_MIGRATE=false
DATABASE_SSL=false

# --- Database (PostgreSQL) ---
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=envsync
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=envsync
POSTGRES_PORT=5432

# --- S3 / RustFS ---
S3_BUCKET=envsync-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY=rustfsadmin
S3_SECRET_KEY=rustfsadmin
S3_BUCKET_URL=http://localhost:19001
S3_ENDPOINT=http://localhost:19001
RUSTFS_PORT=19000
RUSTFS_HTTP_PORT=19001

# --- Redis ---
CACHE_ENV=production
REDIS_URL=redis://localhost:6379
REDIS_PORT=6379

# --- SMTP ---
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@localhost
# --- Mailpit ---
MAILPIT_PORT=8025
MAILPIT_SMTP_PORT=1025

# --- Zitadel (IdP; console http://localhost:8080/ui/console, login http://localhost:3000) ---
ZITADEL_URL=http://localhost:8080
ZITADEL_MASTERKEY=
ZITADEL_ADMIN_USERNAME=zitadel-admin@zitadel.localhost
ZITADEL_ADMIN_PASSWORD=Password1!
ZITADEL_EXTERNALDOMAIN=localhost
ZITADEL_PAT=
# Or set ZITADEL_PAT_FILE to bootstrap PAT (e.g. ./zitadel-data/admin.pat when bind-mounting Zitadel data)
ZITADEL_PAT_FILE=
# With ZITADEL_PAT (or PAT from file) set, init creates OIDC apps and writes client IDs/secrets below
ZITADEL_WEB_CLIENT_ID=
ZITADEL_WEB_CLIENT_SECRET=
ZITADEL_CLI_CLIENT_ID=
ZITADEL_CLI_CLIENT_SECRET=
ZITADEL_API_CLIENT_ID=
ZITADEL_API_CLIENT_SECRET=
ZITADEL_WEB_REDIRECT_URI=http://localhost:4000/api/access/web/callback
ZITADEL_WEB_CALLBACK_URL=http://localhost:8001/auth/callback
ZITADEL_API_REDIRECT_URI=http://localhost:4000/api/access/api/callback

# --- URLs (API / Web / Landing) ---
LANDING_PAGE_URL=http://localhost:8002
DASHBOARD_URL=http://localhost:8001

# --- Frontend (Vite: only VITE_* are exposed to client) ---
VITE_API_BASE_URL=http://localhost:4000
VITE_OTEL_ENDPOINT=http://localhost:4318
VITE_OTEL_SERVICE_NAME=envsync-web
VITE_OTEL_SDK_DISABLED=false
VITE_OTEL_TRACE_SAMPLE_RATE=1.0

# --- Vault (HashiCorp Vault for env/secret storage) ---
VAULT_TOKEN=
VAULT_UNSEAL_KEY=
VAULT_PORT=8200
VAULT_ADDR=http://localhost:8200
VAULT_ROLE_ID=
VAULT_SECRET_ID=
VAULT_MOUNT_PATH=envsync
VAULT_NAMESPACE=

# --- OpenFGA (authorization engine, playground http://localhost:8090/playground) ---
OPENFGA_API_URL=http://localhost:8090
OPENFGA_STORE_ID=
OPENFGA_MODEL_ID=
OPENFGA_HTTP_PORT=8090
OPENFGA_GRPC_PORT=8091

# --- miniKMS (envelope encryption) ---
MINIKMS_GRPC_ADDR=localhost:50051
MINIKMS_ROOT_KEY=
MINIKMS_TLS_ENABLED=false

# --- OpenTelemetry (observability) ---
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=envsync-api
OTEL_SDK_DISABLED=false

# --- Grafana (observability UI, http://localhost:3302) ---
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=EnvSync@2024!
GRAFANA_PORT=3302

# --- HyperDX (Session Replay + Observability, dashboard http://localhost:8800) ---
HDX_PORT=8800
HDX_OTEL_GRPC_PORT=4316
HDX_OTEL_PORT=4319
VITE_HYPERDX_API_KEY=envsync-local
VITE_HYPERDX_URL=http://localhost:4319
VITE_HYPERDX_DISABLED=false

# --- Docker / optional ---
# Mailpit (SMTP 1025, UI http://localhost:8025) – no extra env needed for local dev
