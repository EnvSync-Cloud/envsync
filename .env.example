# =============================================================================
# EnvSync Monorepo – single source of truth for environment variables
# Copy to .env and fill in values. All packages (api, web, landing) and
# docker-compose read from this file when run from the repo root.
# =============================================================================

# --- App (API) ---
NODE_ENV=development
PORT=4000

# --- S3 / RustFS ---
S3_BUCKET=envsync-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY=rustfsadmin
S3_SECRET_KEY=rustfsadmin
S3_BUCKET_URL=http://localhost:19001
S3_ENDPOINT=http://localhost:19001
RUSTFS_PORT=19000
RUSTFS_HTTP_PORT=19001

# --- Redis ---
CACHE_ENV=production
REDIS_URL=redis://localhost:6379
REDIS_PORT=6379

# --- SMTP ---
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@localhost
# --- Mailpit ---
MAILPIT_PORT=8025
MAILPIT_SMTP_PORT=1025

# --- Keycloak (IdP; console http://localhost:8080) ---
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=envsync
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_DB_PASSWORD=keycloak
KEYCLOAK_PORT=8080
# Init creates OIDC clients and writes client IDs/secrets below
KEYCLOAK_WEB_CLIENT_ID=envsync-web
KEYCLOAK_WEB_CLIENT_SECRET=
KEYCLOAK_CLI_CLIENT_ID=envsync-cli
KEYCLOAK_API_CLIENT_ID=envsync-api
KEYCLOAK_API_CLIENT_SECRET=
KEYCLOAK_WEB_REDIRECT_URI=http://localhost:4000/api/access/web/callback
KEYCLOAK_WEB_CALLBACK_URL=http://localhost:8001/auth/callback
KEYCLOAK_API_REDIRECT_URI=http://localhost:4000/api/access/api/callback

# --- URLs (API / Web / Landing) ---
LANDING_PAGE_URL=http://localhost:8002
DASHBOARD_URL=http://localhost:8001

# --- Frontend (Vite: only VITE_* are exposed to client) ---
VITE_API_BASE_URL=http://localhost:4000
VITE_OTEL_ENDPOINT=http://localhost:4318
VITE_OTEL_SERVICE_NAME=envsync-web
VITE_OTEL_SDK_DISABLED=false
VITE_OTEL_TRACE_SAMPLE_RATE=1.0

# --- SpaceTimeDB (all data + encryption + authorization) ---
# Option A: SpacetimeDB Cloud (default — no local container needed)
STDB_URL=https://maincloud.spacetimedb.com
STDB_DB_NAME=envsync-kms
STDB_AUTH_TOKEN=<your-cloud-token>
STDB_ROOT_KEY=
STDB_TOKEN_URL=https://auth.spacetimedb.com/oidc/token
# Option B: Self-hosted (run with: docker compose --profile stdb up)
# STDB_URL=http://localhost:1234
# STDB_DB_NAME=envsync-kms
# STDB_AUTH_TOKEN=
# STDB_ROOT_KEY=
# STDB_PORT=1234

# --- OpenTelemetry (observability) ---
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=envsync-api
OTEL_SDK_DISABLED=false

# --- Grafana (observability UI, http://localhost:3302) ---
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=EnvSync@2024!
GRAFANA_PORT=3302

# --- HyperDX (Session Replay + Observability, dashboard http://localhost:8800) ---
HDX_PORT=8800
HDX_OTEL_GRPC_PORT=4316
HDX_OTEL_PORT=4319
VITE_HYPERDX_API_KEY=envsync-local
VITE_HYPERDX_URL=http://localhost:4319
VITE_HYPERDX_DISABLED=false

# --- Docker / optional ---
# Mailpit (SMTP 1025, UI http://localhost:8025) – no extra env needed for local dev
