# =============================================================================
# EnvSync Production Environment Variables
# Copy to .env and fill in values before running docker-compose.prod.yaml
# =============================================================================

# --- App (API) ---
NODE_ENV=production
PORT=4000
DB_LOGGING=false
DB_AUTO_MIGRATE=false
DATABASE_SSL=false

# --- Database (PostgreSQL) ---
# These are internal to the Docker network; no need to expose ports
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD
DATABASE_NAME=envsync
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD
POSTGRES_DB=envsync

# --- S3 / RustFS ---
S3_BUCKET=envsync-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY=CHANGE_ME_RUSTFS_ACCESS_KEY
S3_SECRET_KEY=CHANGE_ME_RUSTFS_SECRET_KEY
S3_BUCKET_URL=http://rustfs:9001
S3_ENDPOINT=http://rustfs:9001
RUSTFS_ACCESS_KEY=CHANGE_ME_RUSTFS_ACCESS_KEY
RUSTFS_SECRET_KEY=CHANGE_ME_RUSTFS_SECRET_KEY

# --- Redis ---
CACHE_ENV=production
REDIS_URL=redis://redis:6379

# --- SMTP (use a real SMTP provider in production) ---
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=CHANGE_ME
SMTP_PASS=CHANGE_ME
SMTP_FROM=noreply@yourdomain.com

# --- Zitadel (OIDC / IAM) ---
ZITADEL_URL=http://zitadel:8080
ZITADEL_MASTERKEY=CHANGE_ME_32_CHARACTER_MASTERKEY!
ZITADEL_EXTERNALDOMAIN=auth.yourdomain.com
ZITADEL_EXTERNALSECURE=true
ZITADEL_TLS_ENABLED=false
ZITADEL_ADMIN_USERNAME=zitadel-admin
ZITADEL_ADMIN_PASSWORD=CHANGE_ME_ADMIN_PASSWORD
ZITADEL_DB_USER=postgres
ZITADEL_DB_PASSWORD=CHANGE_ME_ZITADEL_DB_PASSWORD
ZITADEL_PAT=
ZITADEL_PAT_FILE=
ZITADEL_WEB_CLIENT_ID=
ZITADEL_WEB_CLIENT_SECRET=
ZITADEL_CLI_CLIENT_ID=
ZITADEL_CLI_CLIENT_SECRET=
ZITADEL_API_CLIENT_ID=
ZITADEL_API_CLIENT_SECRET=
ZITADEL_WEB_REDIRECT_URI=https://api.yourdomain.com/api/access/web/callback
ZITADEL_WEB_CALLBACK_URL=https://app.yourdomain.com/auth/callback
ZITADEL_API_REDIRECT_URI=https://api.yourdomain.com/api/access/api/callback
ZITADEL_PORT=8080
ZITADEL_MACHINE_PAT_EXPIRATIONDATE=2029-01-01T00:00:00Z
ZITADEL_LOGINCLIENT_PAT_EXPIRATIONDATE=2029-01-01T00:00:00Z

# --- URLs (public-facing) ---
LANDING_PAGE_URL=https://yourdomain.com
DASHBOARD_URL=https://app.yourdomain.com

# --- Vault (HashiCorp Vault) ---
VAULT_TOKEN=
VAULT_UNSEAL_KEY=
VAULT_ADDR=http://vault:8200
VAULT_ROLE_ID=
VAULT_SECRET_ID=
VAULT_MOUNT_PATH=envsync
VAULT_NAMESPACE=

# --- OpenFGA (authorization engine) ---
OPENFGA_API_URL=http://openfga:8090
OPENFGA_STORE_ID=
OPENFGA_MODEL_ID=
OPENFGA_DB_PASSWORD=CHANGE_ME_OPENFGA_DB_PASSWORD

# --- miniKMS (encryption key management) ---
MINIKMS_ROOT_KEY=CHANGE_ME_32_BYTE_HEX_ROOT_KEY
MINIKMS_GRPC_ADDR=minikms:50051
MINIKMS_TLS_ENABLED=false
MINIKMS_DB_USER=postgres
MINIKMS_DB_PASSWORD=CHANGE_ME_MINIKMS_DB_PASSWORD
